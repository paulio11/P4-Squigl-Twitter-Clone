{% extends 'base.html' %}
{% load static %}

{% block title %}
{{ user }}
{% endblock %}

{% block content %}
{{ user.following.all }}
<!-- User profile card -->
<div class="card user-card">
    {% if user.profile_background %}
    <img src="{{ user.profile_background.url }}" class="card-img-top user-background">
    {% else %}
    <div class="user-background"></div>
    {% endif %}
    {% if user.avatar %}
    <img src="{{ user.avatar.url }}" class="user-avatar">
    {% else %}
    <img src="{% static 'images/avatar.jpg' %}" class="user-avatar">
    {% endif %}
    <div class="card-body user-buttons">
        {% if request.user == user %}
        <a href="#" class="btn btn-dark">Edit Profile (NYI)</a>
        {% else %}
        <a href="{% url 'follow' user %}" id="follow-btn" class="btn btn-dark">
            {% if following %}
            Following
            {% else %}
            Follow
            {% endif %}
        </a>
        <a href="#" class="btn btn-dark">Message (NYI)</a>
        {% endif %}
    </div>
    <div class="card-body">
        <h4 class="card-title">
            {{ user.display_name }}
            {% if user.verified %}
            <i class="fa-solid fa-square-check verified"></i>
            {% endif %}
        </h4>
        <p class="text-muted">~{{ user }}</p>
        {% if user.about %}
        <p class="card-text">{{ user.about }}</p>
        {% endif %}
        {% if user.website %}
        <p><i class="fa-solid fa-link"></i> <a href="{{ user.website }}">{{ user.website }}</a></p>
        {% endif %}
    </div>
    <div class="card-footer">
        <span><strong>{{ user.followers_count }}</strong>
            {% if user.followers_count <= 1 %}
            Follower
            {% else %}
            Followers
            {% endif %}
        </span>
        <span><strong>{{ user.following_count }}</strong> Following</span>
        <span><strong>{{ posts.count }}</strong>
            {% if posts.count <= 1 %}
            Post
            {% else %}
            Posts
            {% endif %}
        </span>
    </div>
</div>
<!-- User profile card ends -->
<!-- Tab navigation -->
<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="posts-tab" data-bs-toggle="tab" data-bs-target="#posts-tab-pane" type="button"
            role="tab" aria-controls="posts-tab-pane" aria-selected="true"><i class="fa-solid fa-note-sticky"></i> All Posts</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="images-tab" data-bs-toggle="tab" data-bs-target="#images-tab-pane" type="button"
            role="tab" aria-controls="images-tab-pane" aria-selected="false"><i class="fa-solid fa-image"></i> Images</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="liked-tab" data-bs-toggle="tab" data-bs-target="#liked-tab-pane" type="button"
            role="tab" aria-controls="liked-tab-pane" aria-selected="false"><i class="fa-solid fa-heart"></i> Likes</button>
    </li>
</ul>
<div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="posts-tab-pane" role="tabpanel" aria-labelledby="posts-tab" tabindex="0">
        {% for post in posts %}
        {% include 'post-template.html' %}
        {% endfor %}
    </div>
    <div class="tab-pane fade" id="images-tab-pane" role="tabpanel" aria-labelledby="images-tab" tabindex="0">
        <!-- Posts with images -->
        <div class="image-grid">
            {% for post in posts %}
            {% if post.image %}
            <a href="{% url 'post' post.id %}"><img src="{{ post.image.url }}" class="grid-image"></a>
            {% endif %}
            {% endfor %}
        </div>    
        <!-- Posts with images ends -->
    </div>
    <div class="tab-pane fade" id="liked-tab-pane" role="tabpanel" aria-labelledby="liked-tab" tabindex="0">
        {% for post in liked_posts %}
        {% include 'post-template.html' %}
        {% endfor %}
    </div>
</div>
<!-- Tab navigation ends -->
{% endblock %}

{% block rightsidebar %}
Right block
{% endblock %}
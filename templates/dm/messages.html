{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block title %}
Messages
{% endblock %}

{% block content %}
<h2>Messages</h2>
<hr>
<!-- Messages navigation -->
<ul class="nav nav-pills mb-3" id="nav-pills-tab" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="pills-unread-tab" data-bs-toggle="pill" data-bs-target="#pills-unread"
            type="button" role="tab" aria-controls="pills-unread" aria-selected="true">Unread <span class="badge text-bg-{% if unread_messages.count > 0 %}danger{% else %}light{% endif %}">{{ unread_messages.count }}</span></button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="pills-read-tab" data-bs-toggle="pill" data-bs-target="#pills-read"
            type="button" role="tab" aria-controls="pills-read" aria-selected="false">Read <span class="badge text-bg-light d-none d-md-block">{{ msgs.count }}</span></button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="pills-sent-tab" data-bs-toggle="pill" data-bs-target="#pills-sent"
            type="button" role="tab" aria-controls="pills-sent" aria-selected="false">Sent <span class="badge text-bg-light d-none d-md-block">{{ sent_messages.count }}</span></button>
    </li>
</ul>
<!-- Messages navigation ends -->
<div class="tab-content" id="pills-tabContent">
    <!-- Unread messages -->
    <div class="tab-pane fade show active" id="pills-unread" role="tabpanel" aria-labelledby="pills-unread-tab" tabindex="0">
        {% if unread_messages %}
        {% for msg in unread_messages %}
        {% include 'templates/message-template.html' %}
        {% endfor %}
        {% else %}
        <div class="alert alert-light" role="alert">
            You have no unread messages ☹️
        </div>
        {% endif %}
    </div>
    <!-- Unread messages ends -->
    <!-- Read messages -->
    <div class="tab-pane fade" id="pills-read" role="tabpanel" aria-labelledby="pills-read-tab" tabindex="0">
        {% if msgs %}
        {% for msg in msgs %}
        {% include 'templates/message-template.html' %}
        {% endfor %}
        {% else %}
        <div class="alert alert-light" role="alert">
            You have no messages ☹️
        </div>
        {% endif %}
    </div>
    <!-- Read messages ends -->
    <!-- Sent messages -->
    <div class="tab-pane fade" id="pills-sent" role="tabpanel" aria-labelledby="pills-sent-tab" tabindex="0">
        {% if sent_messages %}
        {% for msg in sent_messages %}
        {% include 'templates/message-template.html' %}
        {% endfor %}
        {% else %}
        <div class="alert alert-light" role="alert">
            You have no sent messages ☹️
        </div>
        {% endif %}
    </div>
    <!-- Sent messages ends -->
</div>
{% endblock %}

{% block rightsidebar %}
<aside>
    {% include 'side/hashtags-side-template.html' %}
    {% include 'side/users-side-template.html' %}    
</aside>
{% endblock %}